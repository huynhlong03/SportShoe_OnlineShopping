@using Microsoft.AspNetCore.Identity;
@inject SignInManager<ApplicationUser> signInManager;
@inject UserManager<ApplicationUser> userManager;
<div class="header_section">
	<div class="container">
		<div class="row">
			<div class="col-sm-3">
				<div class="logo"><a asp-controller="Home" asp-action="Index"><img src="~/images/logo.png"></a></div>
			</div>
			<div class="col-sm-9">
				<nav class="navbar navbar-expand-lg navbar-light bg-light">
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
						<div class="navbar-nav">
							
							<a class="nav-item nav-link" asp-controller="Home" asp-action="Index">Trang chủ</a>		
							<a class="nav-item nav-link" href="#">Bộ sưu tập</a>
							<a class="nav-item nav-link" asp-controller="Product" asp-action="Index">Sản phẩm</a>
							
							<a class="nav-item nav-link" href="#">Liên hệ</a>
							<a class="nav-item nav-link last" href="#"><img src="~/images/search_icon.png"></a>
						
							
							@if (signInManager.IsSignedIn(User))
							{
								<div class="nav-item dropdown">
									<button style="color:red" class="nav-link dropdown-toggle" type="button" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
										Hi, @userManager.GetUserName(User)
									</button>
									<div class="dropdown-menu" aria-labelledby="userDropdown">
										<a class="dropdown-item" asp-controller="Account" asp-action="Logout">Đăng xuất</a>
										
									</div>
								</div>
							}
							else
							{
								<div class="nav-item dropdown">
									<button class="nav-link dropdown-toggle" type="button" id="userDropdown" aria-haspopup="true" aria-expanded="false">
										<i class="fa-regular fa-user"></i>
									</button>
									<div class="dropdown-menu" aria-labelledby="userDropdown">
										<a class="dropdown-item" href="~/Account/Login">Đăng nhập</a>
										<a class="dropdown-item" href="~/Account/Register">Đăng ký</a>
									</div>
								</div>
							}
							@await Component.InvokeAsync("Cart")
							
						</div>
					</div>
				</nav>
			</div>
		</div>
	</div>
	@if (ViewBag.banner_section == 1 )
	{
	<div class="banner_section">
		<div class="container-fluid">
			<section class="slide-wrapper">
				<div class="container-fluid">
					<div id="myCarousel" class="carousel slide" data-ride="carousel">
						<!-- Indicators -->
						<ol class="carousel-indicators">
							<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
							<li data-target="#myCarousel" data-slide-to="1"></li>
							<li data-target="#myCarousel" data-slide-to="2"></li>
							<li data-target="#myCarousel" data-slide-to="3"></li>
						</ol>

						<!-- Wrapper for slides -->
						<div class="carousel-inner">
							<div class="carousel-item active">
								<div class="row">
									
									<div class="col-sm-5">
										<div class="banner_taital">
											<h1 class="banner_text">New Running Shoes </h1>
											<h1 class="mens_text"><strong>Men's Like Plex</strong></h1>
											<p class="lorem_text">ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											<button class="buy_bt">Buy Now</button>
											<button class="more_bt">See More</button>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="shoes_img"><img src="~/images/running-shoes.png"></div>
									</div>
								</div>
							</div>
							<div class="carousel-item">
								<div class="row">
									<div class="col-sm-2 padding_0">
										<p class="mens_taital">Men Shoes</p>
										<div class="page_no">0/2</div>
										<p class="mens_taital_2">Men Shoes</p>
									</div>
									<div class="col-sm-5">
										<div class="banner_taital">
											<h1 class="banner_text">New Running Shoes </h1>
											<h1 class="mens_text"><strong>Men's Like Plex</strong></h1>
											<p class="lorem_text">ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											<button class="buy_bt">Buy Now</button>
											<button class="more_bt">See More</button>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="shoes_img"><img src="~/images/running-shoes.png"></div>
									</div>
								</div>
							</div>
							<div class="carousel-item">
								<div class="row">
									<div class="col-sm-2 padding_0">
										<p class="mens_taital">Men Shoes</p>
										<div class="page_no">0/2</div>
										<p class="mens_taital_2">Men Shoes</p>
									</div>
									<div class="col-sm-5">
										<div class="banner_taital">
											<h1 class="banner_text">New Running Shoes </h1>
											<h1 class="mens_text"><strong>Men's Like Plex</strong></h1>
											<p class="lorem_text">ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											<button class="buy_bt">Buy Now</button>
											<button class="more_bt">See More</button>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="shoes_img"><img src="~/images/running-shoes.png"></div>
									</div>
								</div>
							</div>
							<div class="carousel-item">
								<div class="row">
									<div class="col-sm-2 padding_0">
										<p class="mens_taital">Men Shoes</p>
										<div class="page_no">0/2</div>
										<p class="mens_taital_2">Men Shoes</p>
									</div>
									<div class="col-sm-5">
										<div class="banner_taital">
											<h1 class="banner_text">New Running Shoes </h1>
											<h1 class="mens_text"><strong>Men's Like Plex</strong></h1>
											<p class="lorem_text">ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
											<button class="buy_bt">Buy Now</button>
											<button class="more_bt">See More</button>
										</div>
									</div>
									<div class="col-sm-5">
										<div class="shoes_img"><img src="~/images/running-shoes.png"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>
	}
</div>

<style>
	.dropdown-item:hover {
		background-color: #ff4e5b;
		color: white; /* Màu chữ trắng để đảm bảo độ đối lập với màu nền */
	}
</style>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var userDropdown = document.getElementById('userDropdown');
        var dropdownMenu = document.querySelector('.dropdown-menu');

        // Xử lý sự kiện click trên nút dropdown
        userDropdown.addEventListener('click', function (event) {
            event.stopPropagation(); // Ngăn chặn sự kiện click lan rộng đến document

            // Kiểm tra trạng thái hiển thị của dropdown menu
            var isExpanded = dropdownMenu.classList.contains('show');
            
            // Nếu dropdown menu đang ẩn, hiển thị nó. Ngược lại, ẩn nó đi.
            if (!isExpanded) {
                dropdownMenu.classList.add('show');
            } else {
                dropdownMenu.classList.remove('show');
            }
        });

        // Xử lý sự kiện click trên toàn bộ trang để ẩn dropdown menu khi click ra ngoài
        document.addEventListener('click', function (event) {
            var isClickedInsideDropdown = dropdownMenu.contains(event.target);
            
            if (!isClickedInsideDropdown) {
                dropdownMenu.classList.remove('show');
            }
        });
    });
</script>